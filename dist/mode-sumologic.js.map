{"version":3,"sources":["../src/mode-sumologic.js"],"names":["ace","define","require","exports","module","oop","TextHighlightRules","SumologicHighlightRules","keywords","builtinConstants","builtinFunctions","keywordMapper","createKeywordMapper","$rules","token","regex","normalizeRules","inherits","lang","sumologicKeyWords","keyWordsCompletions","map","word","caption","value","meta","score","Number","MAX_VALUE","sumologicFunctions","wrapText","str","len","lines","space_index","line_start","next_line_end","line","i","length","slice","push","join","convertMarkDownTags","text","replace","convertToHTML","item","docText","escapeHTML","def","functionsCompletions","name","docHTML","SumologicCompletions","getCompletions","state","session","pos","prefix","callback","completions","concat","call","prototype","Behaviour","CstyleBehaviour","TokenIterator","SumologicBehaviour","inherit","TextMode","Mode","HighlightRules","$behaviour","$completer","completer","$id"],"mappings":"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","file":"mode-sumologic.js","sourcesContent":["// jshint ignore: start\n// jscs: disable\nace.define(\"ace/mode/sumologic_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text_highlight_rules\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\n\nvar SumologicHighlightRules = function() {\n  var keywords = (\n    'as|by|from|in|matches|nodrop|on|regex|with' +\n    '_collector|_index|_source|_sourceCategory|_sourceHost|_sourceName|_view'\n  );\n\n  var builtinConstants = (\n    'true|false'\n  );\n\n  var builtinFunctions = (\n    'abs|accum|acos|asin|atan|atan2|avg|backshift|cbrt|ceil|concat|cos|cosh|count|count_distinct|count_frequent|diff|exp|expm1|fields|fillmissing|filter|first|last|floor|format|formatDate|lookup|hypot|if|ipv4ToNumber|isNull|isEmpty|isBlank|join|length|limit|log|log10|log1p|luhn|num|number|toLong|pct|merge|max|min|most_recent|least_recent|now|outlier|csv|split|json|keyvalue|kv|xml|parseDate|parseHex|pct_sampling|predict|queryEndTime|queryStartTime|queryTimeRange|replace|rollingstd|round|save|sessionize|sin|sinh|smooth|sort|sqrt|stddev|substring|sum|tan|tanh|timeslice|toDegrees|toLowerCase|toUpperCase|top|toRadians|total|trace|transaction|transpose|urldecode|where|getCIDRPrefix|compareCIDRPrefix|maskFromCIDR'\n  );\n\n  var keywordMapper = this.createKeywordMapper({\n    \"support.function\": builtinFunctions,\n    \"keyword\": keywords,\n    \"constant.language\": builtinConstants\n  }, \"identifier\", true);\n\n  this.$rules = {\n    \"start\" : [ {\n      token : \"string\", // single line\n      regex : /\"(?:[^\"\\\\]|\\\\.)*?\"/\n    }, {\n      token : \"string\", // string\n      regex : \"'.*?'\"\n    }, {\n      token : \"constant.numeric\", // float\n      regex : \"[-]?\\\\d+(?:(?:\\\\.\\\\d*)?(?:[eE][+-]?\\\\d+)?)?\\\\b\"\n    }, {\n      token : \"constant.language\", // time\n      regex : \"\\\\d+[smh]\"\n    }, {\n      token : \"constant.language\", // unit\n      regex : \"\\\\d+[kKMGBTP]\"\n    }, {\n      token : keywordMapper,\n      regex : \"[a-zA-Z]+\"\n    }, {\n      token : \"keyword.operator\",\n      regex : \"\\\\+|\\\\-|\\\\*|\\\\/|%|=|==|!=|<=|>=|<>|<|>\"\n    }, {\n      token : \"paren.lparen\",\n      regex : \"[[({]\"\n    }, {\n      token : \"paren.rparen\",\n      regex : \"[\\\\])}]\"\n    }, {\n      token : \"text\",\n      regex : \"\\\\s+\"\n    } ]\n  };\n\n  this.normalizeRules();\n};\n\noop.inherits(SumologicHighlightRules, TextHighlightRules);\n\nexports.SumologicHighlightRules = SumologicHighlightRules;\n});\n\nace.define(\"ace/mode/sumologic_completions\",[\"require\",\"exports\",\"module\",\"ace/token_iterator\", \"ace/lib/lang\"], function(require, exports, module) {\n\"use strict\";\n\nvar lang = require(\"../lib/lang\");\n\nvar sumologicKeyWords = [\n  \"_collector\", \"_index\", \"_source\", \"_sourceCategory\", \"_sourceHost\", \"_sourceName\", \"_view\",\n  \"as\", \"by\", \"from\", \"in\", \"on\", \"matches\", \"regex\", \"nodrop\", \"with\",\n  \"abs\", \"accum\", \"acos\", \"asin\", \"atan\", \"atan2\", \"avg\",\n  \"backshift\", \"cbrt\", \"ceil\", \"concat\", \"cos\", \"cosh\", \"count\", \"count_distinct\", \"count_frequent\",\n  \"diff\", \"exp\", \"expm1\", \"fields\", \"fillmissing\", \"filter\", \"first\", \"last\", \"floor\", \"format\", \"formatDate\",\n  \"lookup\", \"hypot\", \"if\", \"ipv4ToNumber\", \"isNull\", \"isEmpty\", \"isBlank\", \"join\",\n  \"length\", \"limit\", \"log\", \"log10\", \"log1p\", \"luhn\", \"num\", \"number\", \"toLong\", \"pct\",\n  \"merge\", \"max\", \"min\", \"most_recent\", \"least_recent\", \"now\", \"outlier\",\n  \"csv\", \"split\", \"json\", \"keyvalue\", \"kv\", \"xml\",\n  \"parseDate\", \"parseHex\", \"pct_sampling\", \"predict\", \"queryEndTime\", \"queryStartTime\", \"queryTimeRange\",\n  \"replace\", \"rollingstd\", \"round\", \"save\", \"sessionize\", \"sin\", \"sinh\", \"smooth\", \"sort\", \"sqrt\", \"stddev\", \"substring\", \"sum\",\n  \"tan\", \"tanh\", \"timeslice\", \"toDegrees\", \"toLowerCase\", \"toUpperCase\",\n  \"top\", \"toRadians\", \"total\", \"trace\", \"transaction\", \"transpose\",\n  \"urldecode\", \"where\", \"getCIDRPrefix\", \"compareCIDRPrefix\", \"maskFromCIDR\"\n];\n\nvar keyWordsCompletions = sumologicKeyWords.map(function(word) {\n  return {\n    caption: word,\n    value: word,\n    meta: \"keyword\",\n    score: Number.MAX_VALUE\n  }\n});\n\nvar sumologicFunctions = [\n// TODO\n];\n\nfunction wrapText(str, len) {\n  len = len || 60;\n  var lines = [];\n  var space_index = 0;\n  var line_start = 0;\n  var next_line_end = len;\n  var line = \"\";\n  for (var i = 0; i < str.length; i++) {\n    if (str[i] === ' ') {\n      space_index = i;\n    } else if (i >= next_line_end  && space_index != 0) {\n      line = str.slice(line_start, space_index);\n      lines.push(line);\n      line_start = space_index + 1;\n      next_line_end = i + len;\n      space_index = 0;\n    }\n  }\n  line = str.slice(line_start);\n  lines.push(line);\n  return lines.join(\"&nbsp<br>\");\n}\n\nfunction convertMarkDownTags(text) {\n  text = text.replace(/```(.+)```/, \"<pre>$1</pre>\");\n  text = text.replace(/`([^`]+)`/, \"<code>$1</code>\");\n  return text;\n}\n\nfunction convertToHTML(item) {\n  var docText = lang.escapeHTML(item.docText);\n  docText = convertMarkDownTags(wrapText(docText, 40));\n  return [\n    \"<b>\", lang.escapeHTML(item.def), \"</b>\", \"<hr></hr>\", docText, \"<br>&nbsp\"\n  ].join(\"\");\n}\n\nvar functionsCompletions = sumologicFunctions.map(function(item) {\n  return {\n    caption: item.name,\n    value: item.value,\n    docHTML: convertToHTML(item),\n    meta: \"function\",\n    score: Number.MAX_VALUE\n  };\n});\n\nvar SumologicCompletions = function() {};\n\n(function() {\n  this.getCompletions = function(state, session, pos, prefix, callback) {\n    var completions = keyWordsCompletions.concat(functionsCompletions);\n    callback(null, completions);\n  };\n\n}).call(SumologicCompletions.prototype);\n\nexports.SumologicCompletions = SumologicCompletions;\n});\n\nace.define(\"ace/mode/behaviour/sumologic\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/behaviour\",\"ace/mode/behaviour/cstyle\",\"ace/token_iterator\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../../lib/oop\");\nvar Behaviour = require(\"../behaviour\").Behaviour;\nvar CstyleBehaviour = require(\"./cstyle\").CstyleBehaviour;\nvar TokenIterator = require(\"../../token_iterator\").TokenIterator;\n\nvar SumologicBehaviour = function () {\n  this.inherit(CstyleBehaviour);\n}\noop.inherits(SumologicBehaviour, CstyleBehaviour);\n\nexports.SumologicBehaviour = SumologicBehaviour;\n});\n\nace.define(\"ace/mode/sumologic\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text\",\"ace/mode/sumologic_highlight_rules\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextMode = require(\"./text\").Mode;\nvar SumologicHighlightRules = require(\"./sumologic_highlight_rules\").SumologicHighlightRules;\nvar SumologicCompletions = require(\"./sumologic_completions\").SumologicCompletions;\nvar SumologicBehaviour = require(\"./behaviour/sumologic\").SumologicBehaviour;\n\nvar Mode = function() {\n  this.HighlightRules = SumologicHighlightRules;\n  this.$behaviour = new SumologicBehaviour();\n  this.$completer = new SumologicCompletions();\n  // replace keyWordCompleter\n  this.completer = this.$completer;\n};\noop.inherits(Mode, TextMode);\n\n(function() {\n\n  this.$id = \"ace/mode/sumologic\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n\n});\n"]}